const Router = require("express-promise-router");
const db = require("../db");

const router = new Router();

module.exports = router;

/*      NEW {{constantCase name}}      */
// TODO: Add creation fields
router.post("/", async (req, res) => {
  const {
    /* fields here */
  } = req.body;
  const { rows } = await db.query(
    "INSERT INTO {{snakeCase name}}s() VALUES ()",
    []
  );
  res.status(201).send(rows);
});

/*      GET ALL {{constantCase name}}S     */
// TODO: Add return fields
router.get("/", async (req, res) => {
  const { rows } = await db.query("SELECT * FROM {{snakeCase name}}s");
  res.status(200).send(rows);
});

/*      GET {{constantCase name}} BY ID    */
// TODO: Add return fields
router.get("/:id", async (req, res) => {
  const id = req.params.id;
  const {
    rows,
  } = await db.query("SELECT * FROM {{snakeCase name}}s WHERE id = $1", [id]);
  res.status(200).send(rows);
});
